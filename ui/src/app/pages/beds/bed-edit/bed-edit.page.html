<div class="container mx-auto p-6 bg-white rounded-lg shadow-md">
  <!-- Заголовок страницы -->
  <h1 nz-typography class="text-2xl font-bold mb-6">
    {{ isEdit ? 'Edit BedType' : 'Create a new BedType' }}
  </h1>

  <!-- Индикатор загрузки данных -->
  <nz-spin [nzSpinning]="isLoading.bedType">
    <!-- Форма для редактирования/создания -->
    <form nz-form [formGroup]="editForm" (ngSubmit)="saveBedType()">

      <!-- Поле для названия -->
      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="name">Название</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="Пожалуйста, введите название!">
          <input nz-input formControlName="name" id="name" placeholder="Например, Двуспальная" />
        </nz-form-control>
      </nz-form-item>

      <!-- Компонент для загрузки иконки -->
      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="iconRef">Иконка</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="Пожалуйста, выберите файл иконки!">
          <div class="flex items-center">
            <!-- Компонент загрузки от Ant Design -->
            <nz-upload
              nzAccept="image/png,image/jpeg,image/svg+xml"
              [nzBeforeUpload]="beforeUpload"
              [nzShowUploadList]="false"
            >
              <button nz-button type="button">
                <i nz-icon nzType="upload"></i>
                <span>Выбрать файл</span>
              </button>
            </nz-upload>

            <!-- Блок для превью изображения -->
            <div *ngIf="previewImage" class="ml-4">
              <img [src]="previewImage" alt="Превью" class="w-16 h-16 border rounded object-cover"/>
            </div>
          </div>

          <!-- Поле для отображения имени файла (скрыто, но используется для валидации) -->
          <input nz-input formControlName="iconRef" id="iconRef" class="hidden-input" />
          <!-- Отображение имени выбранного файла, если нет превью -->
          <span *ngIf="!previewImage && editForm.get('iconRef')?.value" class="mt-2 d-block text-gray-600">
            {{ editForm.get('iconRef')?.value }}
          </span>
        </nz-form-control>
      </nz-form-item>

      <!-- Кнопки управления формой -->
      <nz-form-item>
        <nz-form-control [nzSm]="14" [nzOffset]="6">
          <button nz-button nzType="primary" [nzLoading]="isLoading.save" [disabled]="!editForm.valid">
            {{ isEdit ? 'Сохранить' : 'Создать' }}
          </button>
          <button nz-button type="button" (click)="cancel()" class="ml-2">Отмена</button>
        </nz-form-control>
      </nz-form-item>

    </form>
  </nz-spin>
</div>

<!-- Добавьте этот стиль в ваш CSS файл, чтобы скрыть ненужное поле ввода -->
<style>
  .hidden-input {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    border: 0;
  }
</style>
